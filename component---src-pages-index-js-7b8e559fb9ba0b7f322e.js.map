{"version":3,"sources":["webpack:///./src/images/phone-ios.png","webpack:///./src/images/phone-android.png","webpack:///./src/utils/shuffleArray.js","webpack:///./src/utils/loadImage.js","webpack:///./src/components/packshot.js","webpack:///./src/pages/index.js"],"names":["module","exports","shuffleArray","array","shuffledArray","i","length","j","Math","floor","random","loadImage","url","Promise","resolve","image","Image","addEventListener","src","Packshot","sloganDuration","slogans","appLinks","shuffledSlogans","useState","init","setInit","currentSlogan","useRef","sloganState","setSloganState","prevSloganState","useEffect","isActual","all","phoneIosImage","phoneAndroidImage","then","delay","setTimeout","clearTimeout","current","nextState","lifetime","className","styles","root","container","slogan","cn","sloganPrefix","sloganPrefixActive","sloganFiller","map","index","sloganByLine","split","key","sloganPostfix","sloganPostfixIn","sloganPostfixActiveSlow","line","appLinksHidden","product","productHidden","productAndroid","productIos","defaultProps","IndexPage","pageConfig","description","appStore","googlePlay","footerLogoLink","footer"],"mappings":"8EAAAA,EAAOC,QAAU,IAA0B,yD,qBCA3CD,EAAOC,QAAU,IAA0B,6D,sjBCM3C,IAeeC,EAfM,SAAAC,GAGjB,IAFA,IAAMC,EAAa,EAAOD,GAEjBE,EAAIF,EAAMG,OAAS,EAAGD,EAAI,EAAGA,IAAK,CACvC,IAAIE,EAAIC,KAAKC,MAAMD,KAAKE,UAAYL,EAAI,IADD,EAGA,CACnCD,EAAcG,GACdH,EAAcC,IAFjBD,EAAcC,GAHwB,KAGpBD,EAAcG,GAHM,KAS3C,OAAOH,GCDIO,EAXG,SAAAC,GAAG,OACjB,IAAIC,SAAQ,SAAAC,GACR,IAAMC,EAAQ,IAAIC,MAElBD,EAAME,iBAAiB,QAAQ,WAC3BH,EAAQC,MAGZA,EAAMG,IAAMN,M,+DCFdO,EAAW,SAAC,GAA2C,IAAD,MAAxCC,EAAwC,EAAxCA,eAAgBC,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,SAClCC,EAAmBC,oBAAS,WAC/B,OAAOtB,EAAamB,MAFgC,KAIhCG,oBAAS,GAA1BC,EAJiD,KAI3CC,EAJ2C,KAKlDC,EAAgBC,iBAAO,GAL2B,EAMlBJ,mBAAS,MAAxCK,EANiD,KAMpCC,EANoC,KAOlDC,EAAkBH,iBAAO,MAyE/B,OAtEAI,qBAAU,WACN,IAAIC,GAAW,EAWf,OATApB,QAAQqB,IAAI,CACRvB,EAAUwB,KACVxB,EAAUyB,OACXC,MAAK,WACAJ,GACAP,GAAQ,MAIT,WACHO,GAAW,KAEhB,IAGHD,qBAAU,WACN,IAAIP,EAAJ,CAIA,IAAMa,EAAQC,YAAW,WACrBT,EAAe,SAChBV,GAEH,OAAO,WACHoB,aAAaF,OAElB,CAACb,EAAML,IAGVY,qBAAU,WACN,GAAID,EAAgBU,UAAYZ,EAAhC,CAIA,IAAIa,EACAC,EAEJZ,EAAgBU,QAAUZ,EAEN,OAAhBA,GACAa,EAAY,SACZC,EAAW,KACY,WAAhBd,GACPa,EAAY,MACZC,EAAWvB,GACY,QAAhBS,IACPa,EAAY,KACZC,EAAW,GAGf,IAAML,EAAQC,YAAW,WACD,QAAhBV,IACAF,EAAcc,QACVd,EAAcc,SAAWlB,EAAgBjB,OAAS,EAC5C,EACAqB,EAAcc,QAAU,GAGtCX,EAAeY,KAChBC,GAEH,OAAO,WACHH,aAAaF,OAElB,CAACT,EAAaT,EAAgBO,EAAeJ,EAAgBjB,SAG5D,yBAAKsC,UAAWC,IAAOC,MACnB,kBAAC,IAAD,CAAWF,UAAWC,IAAOE,WACzB,yBAAKH,UAAWC,IAAOG,QACnB,yBACIJ,UAAWK,IAAG,CACVJ,IAAOK,cADG,OAGLL,IAAOM,qBAAsB1B,EAHxB,MADlB,aAWA,yBAAKmB,UAAWC,IAAOO,cACnB,kCACA,mCAGH7B,EAAgB8B,KAAI,SAACL,EAAQM,GAAW,IAAD,EAC9BC,EAAeP,EAAOQ,MAAM,MAElC,OACI,yBACIC,IAAKH,EACLV,UAAWK,IAAG,CACVJ,IAAOa,eADG,OAGLb,IAAOc,iBAAkBlC,EAHpB,EAILoB,IAAOe,0BACHnC,IACAI,GACDF,EAAcc,UAAYa,EAPxB,EAQLT,IAAO,gBAAgBhB,IACpBA,GACAF,EAAcc,UAAYa,EAVxB,MAcbC,EAAaF,KAAI,SAACQ,EAAMP,GACrB,OAAIA,EAAQ,EACD,KAGJ,yBAAKG,IAAKI,GAAOA,WAO5C,kBAAC,IAAD,CACIjB,UAAWK,IAAG,CACVJ,IAAOvB,UADG,OAEPuB,IAAOiB,gBAAiBrC,EAFjB,GAGV,cAEJH,SAAUA,KAIlB,yBACIsB,UAAWK,IAAG,CACVJ,IAAOkB,SADG,OAEPlB,IAAOmB,eAAgBvC,EAFhB,MAKd,yBAAKmB,UAAWC,IAAOoB,iBACvB,yBAAKrB,UAAWC,IAAOqB,gBAWvC/C,EAASgD,aAAe,CACpB/C,eAAgB,KAGLD,QCpIAiD,UAvCG,WACd,IAAMC,EAAa,CACfC,YACI,6DACJhD,SAAU,CACNiD,SAAU,oBACVC,WAAY,sBAEhBC,eAAgB,oBAChBrD,eAAgB,IAEhBC,QAAS,CAAC,iCAAD,wFAYb,OACI,kBAAC,IAAD,CACIqD,QAAM,EACNJ,YAAaD,EAAWC,YACxBhD,SAAU+C,EAAW/C,SACrBmD,eAAgBJ,EAAWI,gBAE3B,kBAAC,EAAD,CACIrD,eAAgBiD,EAAWjD,eAC3BE,SAAU+C,EAAW/C,SACrBD,QAASgD,EAAWhD","file":"component---src-pages-index-js-7b8e559fb9ba0b7f322e.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/phone-ios-ac683f3a41bf4577b27cd23b000c8047.png\";","module.exports = __webpack_public_path__ + \"static/phone-android-dc613b0f8daec3e5f2dd7418894b390c.png\";","/**\n * Shuffle array (Fisherâ€“Yates shuffle)\n * @param {array} array\n * @returns {array} shuffledArray\n */\n\nconst shuffleArray = array => {\n    const shuffledArray = [...array];\n\n    for (let i = array.length - 1; i > 0; i--) {\n        let j = Math.floor(Math.random() * (i + 1));\n\n        [shuffledArray[i], shuffledArray[j]] = [\n            shuffledArray[j],\n            shuffledArray[i],\n        ];\n    }\n\n    return shuffledArray;\n};\n\nexport default shuffleArray;\n","/**\n * Load image\n * @param {string} url\n * @returns {Object} shuffledArray\n */\n\nconst loadImage = url =>\n    new Promise(resolve => {\n        const image = new Image();\n\n        image.addEventListener('load', () => {\n            resolve(image);\n        });\n\n        image.src = url;\n    });\n\nexport default loadImage;\n","import React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport AppLinks from './appLinks';\nimport Container from '../components/container';\nimport shuffleArray from '../utils/shuffleArray';\nimport loadImage from '../utils/loadImage';\nimport styles from './packshot.module.scss';\nimport phoneIosImage from '../images/phone-ios.png';\nimport phoneAndroidImage from '../images/phone-android.png';\n\nconst Packshot = ({ sloganDuration, slogans, appLinks }) => {\n    const [shuffledSlogans] = useState(() => {\n        return shuffleArray(slogans);\n    });\n    const [init, setInit] = useState(true);\n    const currentSlogan = useRef(0);\n    const [sloganState, setSloganState] = useState(null);\n    const prevSloganState = useRef(null);\n\n    // Init\n    useEffect(() => {\n        let isActual = true;\n\n        Promise.all([\n            loadImage(phoneIosImage),\n            loadImage(phoneAndroidImage),\n        ]).then(() => {\n            if (isActual) {\n                setInit(false); // On init\n            }\n        });\n\n        return () => {\n            isActual = false;\n        };\n    }, []);\n\n    // If init finished\n    useEffect(() => {\n        if (init) {\n            return;\n        }\n\n        const delay = setTimeout(() => {\n            setSloganState('Out'); // Start slogans changing\n        }, sloganDuration);\n\n        return () => {\n            clearTimeout(delay);\n        };\n    }, [init, sloganDuration]);\n\n    // Slogans changing\n    useEffect(() => {\n        if (prevSloganState.current === sloganState) {\n            return;\n        }\n\n        let nextState;\n        let lifetime;\n\n        prevSloganState.current = sloganState;\n\n        if (sloganState === 'In') {\n            nextState = 'Active';\n            lifetime = 200;\n        } else if (sloganState === 'Active') {\n            nextState = 'Out';\n            lifetime = sloganDuration;\n        } else if (sloganState === 'Out') {\n            nextState = 'In';\n            lifetime = 0;\n        }\n\n        const delay = setTimeout(() => {\n            if (sloganState === 'Out') {\n                currentSlogan.current =\n                    currentSlogan.current >= shuffledSlogans.length - 1\n                        ? 0\n                        : currentSlogan.current + 1;\n            }\n\n            setSloganState(nextState);\n        }, lifetime);\n\n        return () => {\n            clearTimeout(delay);\n        };\n    }, [sloganState, sloganDuration, currentSlogan, shuffledSlogans.length]);\n\n    return (\n        <div className={styles.root}>\n            <Container className={styles.container}>\n                <div className={styles.slogan}>\n                    <div\n                        className={cn([\n                            styles.sloganPrefix,\n                            {\n                                [styles.sloganPrefixActive]: !init,\n                            },\n                        ])}\n                    >\n                        Keep calm\n                    </div>\n\n                    <div className={styles.sloganFiller}>\n                        <div>I</div>\n                        <div>I</div>\n                    </div>\n\n                    {shuffledSlogans.map((slogan, index) => {\n                        const sloganByLine = slogan.split('\\n');\n\n                        return (\n                            <div\n                                key={index}\n                                className={cn([\n                                    styles.sloganPostfix,\n                                    {\n                                        [styles.sloganPostfixIn]: init,\n                                        [styles.sloganPostfixActiveSlow]:\n                                            !init &&\n                                            !sloganState &&\n                                            currentSlogan.current === index,\n                                        [styles[`sloganPostfix${sloganState}`]]:\n                                            sloganState &&\n                                            currentSlogan.current === index,\n                                    },\n                                ])}\n                            >\n                                {sloganByLine.map((line, index) => {\n                                    if (index > 1) {\n                                        return null;\n                                    }\n\n                                    return <div key={line}>{line}</div>;\n                                })}\n                            </div>\n                        );\n                    })}\n                </div>\n\n                <AppLinks\n                    className={cn([\n                        styles.appLinks,\n                        { [styles.appLinksHidden]: init },\n                        'd-md-none',\n                    ])}\n                    appLinks={appLinks}\n                />\n            </Container>\n\n            <div\n                className={cn([\n                    styles.product,\n                    { [styles.productHidden]: init },\n                ])}\n            >\n                <div className={styles.productAndroid} />\n                <div className={styles.productIos} />\n            </div>\n        </div>\n    );\n};\n\nPackshot.propTypes = {\n    sloganDuration: PropTypes.number,\n    slogans: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\nPackshot.defaultProps = {\n    sloganDuration: 6000,\n};\n\nexport default Packshot;\n","import React from 'react';\n\nimport LayoutMain from '../components/layoutMain';\nimport Packshot from '../components/packshot';\n\nconst IndexPage = () => {\n    const pageConfig = {\n        description:\n            'Applications for anonymous story publishing and discussion',\n        appLinks: {\n            appStore: 'https://apple.com',\n            googlePlay: 'https://google.com',\n        },\n        footerLogoLink: 'https://yandex.ru',\n        sloganDuration: 6000,\n        // Only 2 lines\n        slogans: [\n            `you are\n            anonymous`,\n\n            `& discuss other\n            people's stories`,\n\n            `& Write your\n            own story`,\n        ],\n    };\n\n    return (\n        <LayoutMain\n            footer\n            description={pageConfig.description}\n            appLinks={pageConfig.appLinks}\n            footerLogoLink={pageConfig.footerLogoLink}\n        >\n            <Packshot\n                sloganDuration={pageConfig.sloganDuration}\n                appLinks={pageConfig.appLinks}\n                slogans={pageConfig.slogans}\n            />\n        </LayoutMain>\n    );\n};\n\nexport default IndexPage;\n"],"sourceRoot":""}